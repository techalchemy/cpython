name: python
version: git
base: core18
summary: Dynamic, interpreted, interactive, object oriented programming language
description: |
  Python is an interpreted, interactive, object-oriented programming
  language used for web application development, data science, system
  administration, and more. It is often compared to Tcl, Perl, Scheme
  or Java.

  Python combines remarkable power with very clear syntax. It has
  modules, classes, exceptions, very high level dynamic data types, and
  dynamic typing. There are interfaces to many system calls and
  libraries, as well as to various windowing systems (X11, Motif, Tk,
  Mac, MFC). New built-in modules are easily written in C or C++. Python
  is also usable as an extension language for applications that need a
  programmable interface.

grade: devel
confinement: classic
environment:
  LANG: C.UTF-8
  LC_CTYPE: C.UTF-8

layout:
  /bin/python:
    symlink: $SNAP/bin/python3.9
  /bin/pip:
    symlink: $SNAP/bin/pip3.9

apps:
  python3:
    command: bin/python3
    environment:
      PYTHONUSERBASE: $SNAP_USER_DATA
      PIP_USER: "true"
  python3.9:
    command: bin/python3.9
    environment:
      PYTHONUSERBASE: $SNAP_USER_DATA
      PIP_USER: "true"
  pip3:
    command: bin/pip3
    environment:
      PYTHONUSERBASE: $SNAP_USER_DATA
      PIP_USER: "true"
  pip39:
    command: bin/pip3.9
    environment:
      PYTHONUSERBASE: $SNAP_USER_DATA
      PIP_USER: "true"

parts:
  python:
    plugin: autotools
    source: .
    source-type: git
    configflags:
      - --enable-shared
    install-via: prefix
    build-packages:
      - build-essential
      - libbz2-dev
      - libdb-dev
      - libffi-dev
      - libgdbm-dev
      - liblzma-dev
      - libncurses5-dev
      - libreadline-dev
      - libsqlite3-dev
      - libssl-dev
      - lzma-dev
      - tcl-dev
      - tk-dev
      - uuid-dev
      - xvfb
      - zlib1g-dev
    stage-packages:
      - bzip2
      - libgdbm5
      - libffi6
      - libncurses5
      - libncursesw5
      - libreadline5
      - libssl1.1
      - libzip4
      - lzma
      - sqlite3
      - tcl
      - xvfb
      - zlib1g
